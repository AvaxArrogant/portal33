# Setting Up Your .env.local File

To run the Aviva Portal successfully, you need to set up environment variables in a `.env.local` file at the root of your project.

## Required Variables

```
# Supabase Connection (required)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-url.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# JWT Secret for token signing (required)
JWT_SECRET=set-a-long-random-string

# Site URL (required for auth redirects)
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Demo Users (optional)
DEMO_USERS=user@example.com:password:role,another@example.com:password:role
```

## Database Schema Fix

If you're seeing errors like "Could not find the 'address' column of 'profiles' in the schema cache" or having issues with the user dropdown showing incorrect users, run the schema fix:

```bash
# First, ensure your .env.local file has the required Supabase variables
npm run fix:schema
```

This will add any missing columns to your profiles table.

## How to Get Supabase Keys

1. Log in to your Supabase dashboard
2. Go to Project Settings > API
3. Copy the URL, anon key, and service role key
4. Paste them into your .env.local file

## Important Notes

- Keep your .env.local file secure and never commit it to version control
- The service role key has full database access, so keep it strictly for server-side use
- The JWT_SECRET should be a long, random string used for token signing
